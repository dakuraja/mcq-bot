import logging
from telegram import Update, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    CallbackQueryHandler,
    ContextTypes,
)

# ---------- CONFIG ----------
BOT_TOKEN = "7688080597:AAGdZu38mxpqbBH3fWx_c3hspdPwjiiZKug"   # рдпрд╣рд╛рдБ рдЕрдкрдирд╛ рдЕрд╕рд▓реА Bot Token рдбрд╛рд▓реЗрдВ


# ---------- MAURYAN EMPIRE QUESTIONS ----------
# -*- coding: utf-8 -*-

QUESTIONS = [
    {
        "question": "1. рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХрд┐рд╕рдиреЗ рдХреА?",
        "options": [
            "A) рдмрд┐рдиреНрджреБрд╕рд╛рд░",
            "B) рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп",
            "C) рдЕрд╢реЛрдХ",
            "D) рдкреБрд╖реНрдпрдорд┐рддреНрд░ рд╢реБрдВрдЧ"
        ],
        "correct": "B",
        "explanation": "рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп рдиреЗ 322 рдИ.рдкреВ. рдореЗрдВ рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреАред"
    },
    {
        "question": "2. рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп рдХрд╛ рдЧреБрд░реБ рдХреМрди рдерд╛?",
        "options": [
            "A) рд╡рд┐рд╖реНрдгреБрдЧреБрдкреНрдд",
            "B) рдЪрд╛рдгрдХреНрдп",
            "C) рдкрддрдВрдЬрд▓рд┐",
            "D) рдореЗрдЧрд╕реНрдердиреАрдЬрд╝"
        ],
        "correct": "B",
        "explanation": "рдЪрд╛рдгрдХреНрдп рд╣реА рдХреМрдЯрд┐рд▓реНрдп/рд╡рд┐рд╖реНрдгреБрдЧреБрдкреНрдд рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдХреЛ рд╕рд╛рдореНрд░рд╛рдЬреНрдп рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХреАред"
    },
    {
        "question": "3. рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХреА рд░рд╛рдЬрдзрд╛рдиреА рдереАтАФ",
        "options": [
            "A) рдЙрдЬреНрдЬреИрди",
            "B) рддрдХреНрд╖рд╢рд┐рд▓рд╛",
            "C) рдкрд╛рдЯрд▓рд┐рдкреБрддреНрд░",
            "D) рдХреМрд╢рд╛рдореНрдмреА"
        ],
        "correct": "C",
        "explanation": "рдкрд╛рдЯрд▓рд┐рдкреБрддреНрд░ (рдЖрдзреБрдирд┐рдХ рдкрдЯрдирд╛) рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХреА рд░рд╛рдЬрдзрд╛рдиреА рдереАред"
    },
    {
        "question": "4. рдореЗрдЧрд╕реНрдердиреАрдЬрд╝ рдХрд┐рд╕рдХреЗ рджрд░рдмрд╛рд░ рдореЗрдВ рдЖрдпрд╛?",
        "options": [
            "A) рдЕрд╢реЛрдХ",
            "B) рдмрд┐рдиреНрджреБрд╕рд╛рд░",
            "C) рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп",
            "D) рдмреГрд╣рджреНрд░рде"
        ],
        "correct": "C",
        "explanation": "рдореЗрдЧрд╕реНрдердиреАрдЬрд╝ рд╕реЗрд▓реНрдпреВрдХрд╕ рдирд┐рдХреЗрдЯрд░ рдХрд╛ рджреВрдд рдерд╛ рдФрд░ рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп рдХреЗ рджрд░рдмрд╛рд░ рдореЗрдВ рдЖрдпрд╛ред"
    },
    {
        "question": "5. рдореЗрдЧрд╕реНрдердиреАрдЬрд╝ рдХреА рдкреБрд╕реНрддрдХ рдХрд╛ рдирд╛рдо рд╣реИтАФ",
        "options": [
            "A) рдорд┐рд▓рд┐рдВрджрдкрдиреНрд╣реЛ",
            "B) рдЗрдВрдбрд┐рдХрд╛",
            "C) рдХрдерд╛рд╡рддреНрдереБ",
            "D) рдореБрджреНрд░рд╛рд░рд╛рдХреНрд╖рд╕"
        ],
        "correct": "B",
        "explanation": "рдЗрдВрдбрд┐рдХрд╛ рдореЗрдВ рднрд╛рд░рдд рдХреЗ рд╕рдорд╛рдЬ, рдкреНрд░рд╢рд╛рд╕рди рдФрд░ рдЬреАрд╡рди рдХрд╛ рд╡рд┐рд╡рд░рдг рд╣реИред"
    },
    {
        "question": "6. рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдореМрд░реНрдп рдиреЗ рдХрд┐рд╕ рдпреВрдирд╛рдиреА рд╢рд╛рд╕рдХ рдХреЛ рдкрд░рд╛рдЬрд┐рдд рдХрд┐рдпрд╛?",
        "options": [
            "A) рдПрдВрдЯрд┐рдпреЛрдХрд╕",
            "B) рд╕реЗрд▓реНрдпреВрдХрд╕ рдирд┐рдХреЗрдЯрд░",
            "C) рдбреЗрдореЗрдЯреНрд░рд┐рдпрд╕",
            "D) рдорд┐рдиреЗрдВрдбрд░"
        ],
        "correct": "B",
        "explanation": "рдЪрдВрджреНрд░рдЧреБрдкреНрдд рдиреЗ рд╕реЗрд▓реНрдпреВрдХрд╕ рдирд┐рдХреЗрдЯрд░ рдХреЛ рд╣рд░рд╛рдХрд░ рдЙрд╕рдХреЗ рд╕рд╛рде рд╕рдВрдзрд┐ рдХреА рдФрд░ рдХрдИ рдкреНрд░рджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдПред"
    },
    {
        "question": "7. рдЕрд╢реЛрдХ рдиреЗ рдХрд┐рд╕ рдпреБрджреНрдз рдХреЗ рдмрд╛рдж рдмреМрджреНрдз рдзрд░реНрдо рдЕрдкрдирд╛рдпрд╛?",
        "options": [
            "A) рдкрд╛рдЯрд▓рд┐рдкреБрддреНрд░ рдпреБрджреНрдз",
            "B) рд░рд╛рдЬрдЧреГрд╣ рдпреБрджреНрдз",
            "C) рдХреМрд╢рд╛рдВрдмреА рдпреБрджреНрдз",
            "D) рдХрд▓рд┐рдВрдЧ рдпреБрджреНрдз"
        ],
        "correct": "D",
        "explanation": "рдХрд▓рд┐рдВрдЧ рдпреБрджреНрдз рдХреА рднреАрд╖рдг рд╣рд╛рдирд┐ рджреЗрдЦрдХрд░ рдЕрд╢реЛрдХ рд╣рд┐рдВрд╕рд╛ рд╕реЗ рд╡рд┐рд░рдХреНрдд рд╣реБрдЖ рдФрд░ рдмреМрджреНрдз рдзрд░реНрдо рдЕрдкрдирд╛ рд▓рд┐рдпрд╛ред"
    },
    {
        "question": "8. рдХрд▓рд┐рдВрдЧ рдпреБрджреНрдз рдХрдм рд╣реБрдЖ?",
        "options": [
            "A) 321 рдИ.рдкреВ.",
            "B) 273 рдИ.рдкреВ.",
            "C) 261 рдИ.рдкреВ.",
            "D) 185 рдИ.рдкреВ."
        ],
        "correct": "C",
        "explanation": "рдХрд▓рд┐рдВрдЧ рдпреБрджреНрдз 261 рдИ.рдкреВ. рдореЗрдВ рд╣реБрдЖ, рдпрд╣ рдореМрд░реНрдп рдЗрддрд┐рд╣рд╛рд╕ рдХреА рдкреНрд░рдореБрдЦ рдШрдЯрдирд╛ рд╣реИред"
    },
    {
        "question": "9. рдЕрд╢реЛрдХ рдиреЗ рдХрд┐рд╕ рдмреМрджреНрдз рдкрд░рд┐рд╖рдж рдХрд╛ рдЖрдпреЛрдЬрди рдХрд░рд╡рд╛рдпрд╛?",
        "options": [
            "A) рдкреНрд░рдердо",
            "B) рджреНрд╡рд┐рддреАрдп",
            "C) рддреГрддреАрдп",
            "D) рдЪрддреБрд░реНрде"
        ],
        "correct": "C",
        "explanation": "рдЕрд╢реЛрдХ рдиреЗ рддреГрддреАрдп рдмреМрджреНрдз рдкрд░рд┐рд╖рдж рдкрд╛рдЯрд▓рд┐рдкреБрддреНрд░ рдореЗрдВ рдЖрдпреЛрдЬрд┐рдд рдХрд░рд╡рд╛рдИред"
    },
    {
        "question": "10. рддреГрддреАрдп рдмреМрджреНрдз рдкрд░рд┐рд╖рдж рдХрд╛ рдЕрдзреНрдпрдХреНрд╖ рдерд╛тАФ",
        "options": [
            "A) рд╡рд╕реБрдорд┐рддреНрд░",
            "B) рдирд╛рдЧрд╕реЗрди",
            "C) рдореЛрдЧреНрдЧрд▓рд┐рдкреБрддреНрдд рддрд┐рд╕реНрд╕",
            "D) рдЙрдкрдЧреБрдкреНрдд"
        ],
        "correct": "C",
        "explanation": "рддреГрддреАрдп рдмреМрджреНрдз рдкрд░рд┐рд╖рдж рдХреА рдЕрдзреНрдпрдХреНрд╖рддрд╛ рдореЛрдЧреНрдЧрд▓рд┐рдкреБрддреНрдд рддрд┐рд╕реНрд╕ рдиреЗ рдХреАред"
    },
    {
        "question": "11. рдЕрд╢реЛрдХ рдХреЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╢рд┐рд▓рд╛рд▓реЗрдЦ рдХрд┐рд╕ рд▓рд┐рдкрд┐ рдореЗрдВ рд╣реИрдВ?",
        "options": [
            "A) рджреЗрд╡рдирд╛рдЧрд░реА",
            "B) рдмреНрд░рд╛рд╣реНрдореА",
            "C) рдЦрд░реЛрд╖реНрдареА",
            "D) рдЕрд░реЗрдорд╛рдЗрдХ"
        ],
        "correct": "B",
        "explanation": "рдЕрд╢реЛрдХ рдХреЗ рдЕрдзрд┐рдХрддрд░ рд╢рд┐рд▓рд╛рд▓реЗрдЦ рдмреНрд░рд╛рд╣реНрдореА рд▓рд┐рдкрд┐ рдореЗрдВ рд╣реИрдВ, рдЙрддреНрддрд░-рдкрд╢реНрдЪрд┐рдо рдореЗрдВ рдЦрд░реЛрд╖реНрдареА рднреАред"
    },
    {
        "question": "12. рдЕрд╢реЛрдХ рдХреЗ рд╢рд┐рд▓рд╛рд▓реЗрдЦреЛрдВ рдХреА рднрд╛рд╖рд╛ рдореБрдЦреНрдпрддрдГтАФ",
        "options": [
            "A) рд╕рдВрд╕реНрдХреГрдд",
            "B) рдкрд╛рд▓реА",
            "C) рдкреНрд░рд╛рдХреГрдд",
            "D) рддрд┐рдмреНрдмрддреА"
        ],
        "correct": "C",
        "explanation": "рдЕрдзрд┐рдХрд╛рдВрд╢ рдЕрднрд┐рд▓реЗрдЦ рд╕рд╛рдзрд╛рд░рдг рд▓реЛрдЧреЛрдВ рдХреА рд╕рдордЭ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдХреГрдд рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦреЗ рдЧрдПред"
    },
    {
        "question": "13. рдЕрд╢реЛрдХ рдХреЗ рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдЧреБрд░реБ рдереЗтАФ",
        "options": [
            "A) рдЙрдкрдЧреБрдкреНрдд",
            "B) рдирд╛рдЧрд╛рд░реНрдЬреБрди",
            "C) рдЖрдирдВрдж",
            "D) рдЕрд╕рдВрдЧ"
        ],
        "correct": "A",
        "explanation": "рдкрд░рдВрдкрд░рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЙрдкрдЧреБрдкреНрдд рдХреЛ рдЕрд╢реЛрдХ рдХрд╛ рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдЧреБрд░реБ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред"
    },
    {
        "question": "14. рдореМрд░реНрдп рдкреНрд░рд╢рд╛рд╕рди рдореЗрдВ \"рдЕрдорддреНрдп\" рдХрд╛ рдЕрд░реНрде рд╣реИтАФ",
        "options": [
            "A) рд╕реИрдирд┐рдХ",
            "B) рдЬрд╛рд╕реВрд╕",
            "C) рдордВрддреНрд░реА/рдЕрдзрд┐рдХрд╛рд░реА",
            "D) рдХрд░ рд╕рдВрдЧреНрд░рд╛рд╣рдХ"
        ],
        "correct": "C",
        "explanation": "рдЕрдорддреНрдп рдЙрдЪреНрдЪ рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рдЕрдзрд┐рдХрд╛рд░реА рдпрд╛ рдордВрддреНрд░реА рдереЗ, рдЬреЛ рд╢рд╛рд╕рди рдХрд╛рд░реНрдп рдореЗрдВ рд╕рд╣рд╛рдпрдХ рдереЗред"
    },
    {
        "question": "15. тАЬрдзрдореНрдотАЭ рдХрд╛ рдкреНрд░рдЪрд╛рд░ рдХрд┐рд╕ рдореМрд░реНрдп рд╢рд╛рд╕рдХ рдиреЗ рдХрд┐рдпрд╛?",
        "options": [
            "A) рдмрд┐рдиреНрджреБрд╕рд╛рд░",
            "B) рдЕрд╢реЛрдХ",
            "C) рджрд╢рд░рде",
            "D) рдХреБрдирд╛рд▓"
        ],
        "correct": "B",
        "explanation": "рдЕрд╢реЛрдХ рдиреЗ \"рдзрдореНрдо\" рдиреАрддрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдиреИрддрд┐рдХ рдЬреАрд╡рди, рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдФрд░ рдЕрд╣рд┐рдВрд╕рд╛ рдХрд╛ рдкреНрд░рдЪрд╛рд░ рдХрд┐рдпрд╛ред"
    },
    {
        "question": "16. рдореМрд░реНрдп рдХрд╛рд▓ рдореЗрдВ \"рд╕рдВрдШ\" рдХрд╛ рдЕрд░реНрде рд╣реИтАФ",
        "options": [
            "A) рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рд╡рд┐рднрд╛рдЧ",
            "B) рдХрд┐рд╕рд╛рди рд╕рдВрдШ",
            "C) рд╡реНрдпрд╛рдкрд╛рд░ рд╕рдВрдЧрдарди",
            "D) рдмреМрджреНрдз рднрд┐рдХреНрд╖реБрдУрдВ рдХрд╛ рд╕рдВрдЧрдарди"
        ],
        "correct": "D",
        "explanation": "рд╕рдВрдШ рд╕реЗ рдЖрд╢рдп рдмреМрджреНрдз рднрд┐рдХреНрд╖реБрдУрдВ рдХреЗ рд╕рдВрдЧрдард┐рдд рд╕рдореБрджрд╛рдп рд╕реЗ рдерд╛ред"
    },
    {
        "question": "17. рдореМрд░реНрдп рдХрд╛рд▓ рдореЗрдВ рдкреНрд░рдореБрдЦ рдХрд░ рдХреМрди рд╕рд╛ рдерд╛?",
        "options": [
            "A) рд╡реНрдпрд╛рдкрд╛рд░ рдХрд░",
            "B) рдордиреЛрд░рдВрдЬрди рдХрд░",
            "C) рднреВ-рдХрд░",
            "D) рд╡рди рдХрд░"
        ],
        "correct": "C",
        "explanation": "рдХреГрд╖рд┐ рдЖрдзрд╛рд░рд┐рдд рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рднреВрдорд┐ рдХрд░ рд╣реА рдореБрдЦреНрдп рд░рд╛рдЬрд╕реНрд╡ рд╕реНрд░реЛрдд рдерд╛ред"
    },
    {
        "question": "18. рдЕрд░реНрдерд╢рд╛рд╕реНрддреНрд░ рдХрд╛ рд▓реЗрдЦрдХ рдХреМрди рд╣реИ?",
        "options": [
            "A) рд╡рд┐рд╖реНрдгреБ рд╢рд░реНрдорд╛",
            "B) рдХрд╛рд▓рд┐рджрд╛рд╕",
            "C) рдЪрд╛рдгрдХреНрдп",
            "D) рдкрд╛рдгрд┐рдирд┐"
        ],
        "correct": "C",
        "explanation": "рдХреМрдЯрд┐рд▓реНрдп/рдЪрд╛рдгрдХреНрдп рджреНрд╡рд╛рд░рд╛ рд░рдЪрд┐рдд рдЕрд░реНрдерд╢рд╛рд╕реНрддреНрд░ рдореМрд░реНрдп рдкреНрд░рд╢рд╛рд╕рди рдХрд╛ рдореБрдЦреНрдп рдЧреНрд░рдВрде рд╣реИред"
    },
    {
        "question": "19. рдХрд┐рд╕реЗ рдЕрд╢реЛрдХ рдиреЗ рд╢реНрд░реАрд▓рдВрдХрд╛ рднреЗрдЬрд╛?",
        "options": [
            "A) рдлрд╛рд╣реНрдпрд╛рди",
            "B) рд╣реНрд╡реЗрдирд╕рд╛рдВрдЧ",
            "C) рдорд╣реЗрдВрджреНрд░ рд╡ рд╕рдВрдШрдорд┐рддреНрд░рд╛",
            "D) рдирд╛рдЧрд╛рд░реНрдЬреБрди"
        ],
        "correct": "C",
        "explanation": "рдЕрд╢реЛрдХ рдиреЗ рдЕрдкрдиреЗ рдкреБрддреНрд░ рдорд╣реЗрдВрджреНрд░ рдФрд░ рдкреБрддреНрд░реА рд╕рдВрдШрдорд┐рддреНрд░рд╛ рдХреЛ рдмреМрджреНрдз рдзрд░реНрдо рдкреНрд░рдЪрд╛рд░ рд╣реЗрддреБ рд╢реНрд░реАрд▓рдВрдХрд╛ рднреЗрдЬрд╛ред"
    },
    {
        "question": "20. рдореМрд░реНрдп рдХрд╛рд▓ рдХрд╛ \"рдзрдирдХ\" рдХрд┐рд╕рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдерд╛?",
        "options": [
            "A) рдХреГрд╖рд┐",
            "B) рдзрд╛рддреБ рдХрд╛рд░реНрдп",
            "C) рд╡реНрдпрд╛рдкрд╛рд░",
            "D) рдЪрд┐рдХрд┐рддреНрд╕рд╛"
        ],
        "correct": "B",
        "explanation": "рдзрдирдХ рд╢рдмреНрдж рдХрд╛ рдкреНрд░рдпреЛрдЧ рд▓реЛрд╣рд╛рд░/рдзрд╛рддреБ рдХрд╛рд░реНрдп рд╕реЗ рдЬреБрдбрд╝реЗ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рд╣реЛрддрд╛ рдерд╛ред"
    },
    {
        "question": "21. рдЕрд╢реЛрдХ рдХреЗ рд╢рд┐рд▓рд╛рд▓реЗрдЦреЛрдВ рдХреЛ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдХрд┐рд╕рдиреЗ рдкрдврд╝рд╛?",
        "options": [
            "A) рдХрдирд┐рдВрдШрдо",
            "B) рдЬреЗрдореНрд╕ рдкреНрд░рд┐рдВрд╕реЗрдк",
            "C) рд╕реНрдорд┐рде",
            "D) рдорд╛рд░реНрд╢рд▓"
        ],
        "correct": "B",
        "explanation": "рдЬреЗрдореНрд╕ рдкреНрд░рд┐рдВрд╕реЗрдк рдиреЗ 1837 рдИ. рдореЗрдВ рдмреНрд░рд╛рд╣реНрдореА рд▓рд┐рдкрд┐ рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрдврд╝рд╛ред"
    },
    {
        "question": "22. рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдореЗрдВ рднреВрдорд┐ рдорд╛рдкрдиреЗ рд╡рд╛рд▓рд╛ рдЕрдзрд┐рдХрд╛рд░реАтАФ",
        "options": [
            "A) рд▓рд┐рдкрд┐рдХ",
            "B) рдирдЧрд░рд┐рдХ",
            "C) рд╕рдВрдзрд┐рд╡рд┐рдЧреНрд░рд╣рдХ",
            "D) рдХреЛрд╖рд╛рдзреНрдпрдХреНрд╖"
        ],
        "correct": "A",
        "explanation": "рд▓рд┐рдкрд┐рдХ рднреВрдорд┐ рдорд╛рдкрди, рд▓реЗрдЦрд╛ рд╡ рдЕрднрд┐рд▓реЗрдЦ рдХрд╛ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рдерд╛ред"
    },
    {
        "question": "23. рдЕрд╢реЛрдХ рдХреЗ рдЕрднрд┐рд▓реЗрдЦреЛрдВ рдореЗрдВ тАЬрд░рд╛рдЬреБрдХтАЭ рдХреМрди рдерд╛?",
        "options": [
            "A) рдиреНрдпрд╛рдпрдзреАрд╢",
            "B) рдордВрддреНрд░реА",
            "C) рдЬрд┐рд▓рд╛ рдЕрдзрд┐рдХрд╛рд░реА",
            "D) рджрдВрдбрд╛рдзрд┐рдХрд╛рд░реА"
        ],
        "correct": "C",
        "explanation": "рд░рд╛рдЬреБрдХ рдЖрдзреБрдирд┐рдХ рдЕрд░реНрдереЛрдВ рдореЗрдВ рдЬрд┐рд▓рд╛ рдЕрдзрд┐рдХрд╛рд░реА рдЬреИрд╕рд╛ рдкрдж рдерд╛ рдЬреЛ рдкреНрд░рд╢рд╛рд╕рди рд╡ рдиреНрдпрд╛рдп рджреЛрдиреЛрдВ рджреЗрдЦрддрд╛ рдерд╛ред"
    },
    {
        "question": "24. рдореМрд░реНрдп рд╕рд╛рдореНрд░рд╛рдЬреНрдп рдХрд╛ рдЕрдВрддрд┐рдо рд╢рд╛рд╕рдХ рдерд╛тАФ",
        "options": [
            "A) рджрд╢рд░рде",
            "B) рдХреБрдгрд╛рд▓",
            "C) рдмреГрд╣рджреНрд░рде",
            "D) рдмрд┐рдиреНрджреБрд╕рд╛рд░"
        ],
        "correct": "C",
        "explanation": "рдмреГрд╣рджреНрд░рде рдореМрд░реНрдп рдЕрдВрддрд┐рдо рд╢рд╛рд╕рдХ рдерд╛, рдЬрд┐рд╕рдХреА рд╣рддреНрдпрд╛ рдкреБрд╖реНрдпрдорд┐рддреНрд░ рд╢реБрдВрдЧ рдиреЗ рдХреАред"
    },
    {
        "question": "25. рдореМрд░реНрдп рдХрд╛рд▓ рдХреЗ рд╕рд┐рдХреНрдХреЗ рдореБрдЦреНрдпрддрдГ рдХрд┐рд╕ рдзрд╛рддреБ рдХреЗ рдереЗ?",
        "options": [
            "A) рд╕реЛрдирд╛",
            "B) рддрд╛рдВрдмрд╛",
            "C) рдЪрд╛рдБрджреА",
            "D) рд▓реЛрд╣рд╛"
        ],
        "correct": "C",
        "explanation": "рдореМрд░реНрдп рдХрд╛рд▓ рдХреЗ рдкрдВрдЪ-рдЪрд┐рд╣реНрдирд┐рдд (Punch-marked) рд╕рд┐рдХреНрдХреЗ рдкреНрд░рд╛рдпрдГ рдЪрд╛рдБрджреА рдХреЗ рд╣реЛрддреЗ рдереЗред"
    }
]


# ---------- LOGGING ----------
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
)
logger = logging.getLogger(__name__)


# ---------- SEND QUESTION ----------
async def send_question(update: Update, context: ContextTypes.DEFAULT_TYPE, q_index: int):
    question_data = QUESTIONS[q_index]
    context.user_data["q_index"] = q_index

    buttons = [
        [InlineKeyboardButton(text=opt, callback_data=f"answer_{i}")]
        for i, opt in enumerate(question_data["options"])
    ]

    markup = InlineKeyboardMarkup(buttons)
    text = f"Q{q_index + 1}: {question_data['question']}"

    if update.callback_query:
        await update.callback_query.message.reply_text(text=text, reply_markup=markup)
    else:
        await update.message.reply_text(text=text, reply_markup=markup)


# ---------- /start COMMAND ----------
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["score"] = 0
    context.user_data["q_index"] = 0

    await update.message.reply_text(
        "рдирдорд╕реНрддреЗ! ЁЯСЛ\nрдореИрдВ MCQ Quiz Bot рд╣реВрдБ.\n"
        "рд╣рд░ рд╕рд╡рд╛рд▓ рдХреЗ рд╕рд╣реА рд╡рд┐рдХрд▓реНрдк рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред\nрдЪрд▓реЛ, рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ!"
    )

    await send_question(update, context, 0)


# ---------- HANDLE ANSWER ----------
async def handle_answer(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    selected = int(query.data.split("_")[1])
    q_index = context.user_data.get("q_index", 0)

    question = QUESTIONS[q_index]

    # 'A'/'B'/'C'/'D' рдХреЛ index (0тАУ3) рдореЗрдВ рдмрджрд▓рдирд╛
    correct_letter = question["correct"]
    correct_index = ord(correct_letter) - ord("A")

    # рд╕рд╣реА/рдЧрд▓рдд рдЪреЗрдХ
    if selected == correct_index:
        context.user_data["score"] = context.user_data.get("score", 0) + 1
        feedback = "тЬЕ рд╕рд╣реА рдЬрд╡рд╛рдм!"
    else:
        feedback = (
            f"тЭМ рдЧрд▓рдд.\nрд╕рд╣реА рдЬрд╡рд╛рдм: {question['options'][correct_index]}"
        )

    await query.message.reply_text(feedback)

    # рд╡реНрдпрд╛рдЦреНрдпрд╛
    explanation = question.get("explanation")
    if explanation:
        await query.message.reply_text(f"тД╣я╕П рд╡реНрдпрд╛рдЦреНрдпрд╛:\n{explanation}")

    # рдЕрдЧрд▓рд╛ рд╕рд╡рд╛рд▓ рдпрд╛ рд╕рдорд╛рдкреНрдд
    next_q = q_index + 1
    if next_q < len(QUESTIONS):
        await send_question(update, context, next_q)
    else:
        score = context.user_data.get("score", 0)
        total = len(QUESTIONS)

        await query.message.reply_text(
            f"ЁЯОЙ рдХреНрд╡рд┐рдЬрд╝ рд╕рдорд╛рдкреНрдд!\n\nрдЖрдкрдХрд╛ рд╕реНрдХреЛрд░: {score}/{total}\n"
            "рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП /start рднреЗрдЬреЗрдВред"
        )
        context.user_data.clear()


# ---------- MAIN ----------
def main():
    app = ApplicationBuilder().token(BOT_TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(handle_answer, pattern=r"^answer_"))

    app.run_polling()


if __name__ == "__main__":
    main()
